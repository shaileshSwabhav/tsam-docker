<app-master-navbar></app-master-navbar>


<div class="container-fluid margin-2pt">
    <div class="card">
        <div class="card-header">
            <button class="btn btn-info float-left" (click)="showSearch=!showSearch">
                {{showSearch ? 'Hide Search' : 'Show Search'}}</button> &nbsp;&nbsp;&nbsp;
            <button class="btn btn-primary float-right" *ngIf="permission?.add" (click)="onAddClick()">Add
                New Resource
            </button>
        </div>
        <div class="card-body" *ngIf="showSearch">
            <form [formGroup]="resourceSearchForm">
                <div class="col-md-12 col-sm-12">
                    <div class="search-bar padding">
                        <div class="filter-by-field row">
                            <div class="form-group col-sm-6 col-md-4">
                                <label for="sel1">Resource Name:</label>
                                <input type="text" class="form-control input-style" formControlName="resourceName"
                                    placeholder="Enter Resource Name">
                                <div class="alert alert-danger" *ngIf="(resourceSearchForm.get('resourceName').dirty || resourceSearchForm.get('resourceName').touched)
                                    &&resourceSearchForm.get('resourceName').invalid">
                                    <div *ngIf="resourceSearchForm.get('resourceName').errors.maxlength">
                                        Resource Name cannot have more than 25 characters
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="isAdmin || isFaculty" class="form-group col-sm-6 col-md-4">
                                <label for="sel1">Resource Type:</label>
                                <select class="form-control input-style" formControlName="resourceType">
                                    <option [ngValue]="null">Select Resource Type</option>
                                    <option *ngFor="let type of resourceTypeList" [ngValue]="type.value">
                                        {{type.value}}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group col-sm-6 col-md-4">
                                <label for="sel1">Resource Sub Type:</label>
                                <select class="form-control input-style" formControlName="resourceSubType">
                                    <option [ngValue]="null">Select Resource Type</option>
                                    <option *ngFor="let type of resourceSubTypeList" [ngValue]="type.value">
                                        {{type.value}}
                                    </option>
                                </select>
                            </div>
                            <div class="form-group col-sm-6 col-md-4">
                                <label for="sel1">Technology:</label>
                                <ng-select [items]="technologyList" bindLabel="language" placeholder="Select Technology"
                                    appendTo="body" [searchable]="true" [clearable]="true"
                                    formControlName="technologyID" class="ng-select-style" bindValue="id"
                                    (search)="getTechnologyList($event)" (focus)="getTechnologyList()"
                                    [loading]="isTechLoading">
                                    <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                        {{item.language}}
                                    </ng-template>
                                </ng-select>
                                <!-- <ng-select [items]="technologyList" bindLabel="language" placeholder="Select Technology"
                                    appendTo="body" [searchable]="true" [clearable]="true" formControlName="technologyID"
                                    class="ng-select-style" bindValue="id">
                                    <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                        {{item.language}}
                                    </ng-template>
                                </ng-select> -->
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="card-footer" *ngIf="showSearch">
            <button class="btn btn-info" type="button" *ngIf="isSearched" (click)="resetSearchAndGetAll()"> View All
                Resources</button>
            <div class="float-right">
                <button class="btn btn-success" type="submit" (click)="searchResources()"
                    [disabled]="!resourceSearchForm.dirty||resourceSearchForm.invalid">Search</button>
                &nbsp;&nbsp;
                <button class="btn btn-secondary" type="reset" (click)="resetSearchForm()">Reset</button>
            </div>
        </div>
    </div>

    <br>
    <br>

    <!-- NGB TABS -->
    <ul ngbNav #nav="ngbNav" [(activeId)]="activeTab" [destroyOnHide]="true" class="nav-tabs"
        (onChange)="onTabChange($event)">
        <ng-container *ngFor="let fileType of fileTypeList; let i = index">
            <li [ngbNavItem]="(i+1)">
                <a ngbNavLink class="navLinkTab" (click)="onTabChange(fileType.value)">
                    {{fileType.value}} <small>({{fileTypeCount.get(fileType.value)}})</small>
                </a>
                <ng-template ngbNavContent>
                    <!-- <h3><i><strong>{{fileType.value}}</strong></i></h3> -->
                    <br>
                    <div class="card-body padding-0pt">
                        <div class="row row-cols-1 row-cols-md-3 g-4"
                            *ngIf="isResourceAvailable; else resourceNotFound">
                            <div class="col margin-bottom" *ngFor="let resource of resources">
                                <div class="card h-100">
                                    <div *ngIf="permission?.update || permission?.delete" class="card-header">
                                        <div class="float-right">
                                            <ng-template #editContent>Update resource</ng-template>
                                            <button *ngIf="permission?.update" class="btn btn-default btn-sm"
                                                type="button" (click)="onUpdateClick(resource)"
                                                [ngbPopover]="editContent" placement="bottom"
                                                triggers="mouseenter:mouseleave">
                                                <i class="material-icons primary">create</i>
                                            </button>
                                            <ng-template #deleteContent>Delete resource</ng-template>
                                            <button *ngIf="permission?.delete" class="btn btn-default btn-sm"
                                                type="button" (click)="onDeleteClick(resource.id)"
                                                [ngbPopover]="deleteContent" placement="bottom"
                                                triggers="mouseenter:mouseleave">
                                                <i class="material-icons red">clear</i>
                                            </button>
                                        </div>
                                    </div>
                                    <!-- <ng-container *ngIf="resource.fileType===IMAGE; then image; 
                                        else others">
                                    </ng-container> -->

                                    <!-- IMAGE -->
                                    <ng-container *ngIf="resource.fileType===IMAGE; else others">
                                        <img class="card-img-top img-height" [src]="resource.resourceURL"
                                            alt="{{resource.resourceName}}" loading="lazy">
                                    </ng-container>

                                    <!-- OTHERS -->
                                    <ng-template #others>
                                        <div *ngIf="resource.previewURL; else noPreview">
                                            <img class="card-img-top img-height" [src]="resource.previewURL"
                                                alt="{{resource.resourceName}}" loading="lazy">
                                        </div>
                                        <ng-template #noPreview>
                                            <svg width="100%" height="180">
                                                <rect width="100%" height="100%" fill="#EFEFEF"></rect>
                                                <text x="25%" y="50%" fill="#171717" dy=".3em">No preview
                                                    available</text>
                                            </svg>
                                        </ng-template>
                                    </ng-template>

                                    <!-- AUDIO -->
                                    <!-- <ng-container *ngIf="resource.fileType===AUDIO">
                                        <audio controls>
                                            <source [src]="resource.resourceURL">
                                        </audio>
                                    </ng-container> -->

                                    <!-- DOCUMENT OR BOOK -->
                                    <!-- <div class="pdf-viewer" *ngIf="resource.fileType===DOCUMENT || resource.fileType===BOOK">
                                        <iframe [src]="getSanitizedURL(resource.resourceURL)" seamless
                                            frameborder="0" scrolling="no"></iframe>
                                    </div> -->

                                    <!-- URL -->
                                    <!-- <ng-container *ngIf="resource.fileType===URL ||
                                        resource.fileType===DOCUMENT || resource.fileType===BOOK">
                                        <svg width="100%" height="180">
                                            <rect width="100%" height="100%" fill="#EFEFEF"></rect>
                                            <text x="25%" y="50%" fill="#171717" dy=".3em">No preview available</text>
                                        </svg>
                                    </ng-container> -->

                                    <!-- VIDEOS -->
                                    <!-- <ng-container *ngIf="resource.fileType===VIDEO">
                                        <ng-container *ngIf="getThumbnail(resource.resourceURL) != null; else otherResource">
                                            <img class="card-img-top img-height" [src]="getThumbnail(resource.resourceURL)"
                                                alt="{{resource.resourceName}}">
                                            <div class="overlay">
                                                <a href={{resource.resourceURL}} target="_blank" (click)="onDownloadClick(resource)">
                                                    <i class="material-icons overlay-icon">
                                                        play_arrow
                                                    </i>
                                                </a>
                                            </div>
                                        </ng-container>
                                    </ng-container> -->
                                    <!-- <ng-template #otherResource>
                                        <svg width="100%" height="180">
                                            <rect width="100%" height="100%" fill="#EFEFEF"></rect>
                                            <text x="25%" y="50%" fill="#171717" dy=".3em">No preview available</text>
                                        </svg>
                                    </ng-template> -->


                                    <div class="card-body">
                                        <h3 class="card-title"><strong>{{resource.resourceName}}</strong>
                                            <span class="float-right">
                                                <ng-template #newTabContent>Open resource in new tab</ng-template>
                                                <button type="button" class="btn" [ngbPopover]="newTabContent"
                                                    placement="bottom" triggers="mouseenter:mouseleave"
                                                    (click)="onDownloadClick(resource)">
                                                    <a href={{resource.resourceURL}} target="_blank">
                                                        <i class="material-icons green">open_in_new</i>
                                                    </a>
                                                </button>
                                            </span>
                                        </h3>
                                        <div class="card-text-margin">
                                            <p class="card-text">Resource Type: {{resource.resourceType}}</p>
                                            <p *ngIf="resource.description" class="card-text">Description:
                                                {{resource.description}}</p>
                                        </div>
                                    </div>
                                    <div class="card-footer footer-height">
                                        <div class="d-flex">
                                            <div class="p-2">
                                                <ng-template #resourceLikeDetailsContent>View details of users who liked
                                                    the resource</ng-template>
                                                <button class="btn btn-sm count-label text-primary" type="button"
                                                    (click)="getAllResourceLike(resource)"
                                                    [ngbPopover]="resourceLikeDetailsContent" placement="bottom"
                                                    triggers="mouseenter:mouseleave">
                                                    <u>{{resource.totalLike}}</u>
                                                </button>
                                                <ng-template #resourceLikeContent>Like/Unlike resource</ng-template>
                                                <button id="like-btn" class="btn" type="button"
                                                    (click)="onLikeClick(resource)" [ngbPopover]="resourceLikeContent"
                                                    placement="bottom" triggers="mouseenter:mouseleave">
                                                    <i [ngClass]="(resource.resourceLike?.isLiked) ? 'material-icons primary' : 
                                                        'material-icons-outlined primary'">thumb_up</i>
                                                </button>
                                            </div>
                                            <div class="ml-auto p-2">
                                                <ng-template #fileDownloadContent>View details of users who downloaded
                                                    the resource</ng-template>
                                                <button class="btn btn-sm count-label text-info" type="button"
                                                    (click)="getResourceDownload(resource)"
                                                    [ngbPopover]="fileDownloadContent" placement="bottom"
                                                    triggers="mouseenter:mouseleave">
                                                    <u>{{resource.totalDownload}}</u>
                                                </button>
                                                <button type="button" class="btn no-transform"
                                                    [ngbPopover]="fileDownloadContent" placement="bottom"
                                                    triggers="mouseenter:mouseleave">
                                                    <i
                                                        class="material-icons-outlined no-transform text-info">file_download</i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <ng-template #resourceNotFound>
                            <br>
                            <br>
                            <div class="container full-h">
                                <div class="d-flex align-items-center full-h">
                                    <div class="col-sm-12 col-md-12 mx-auto">
                                        <div class="jumbotron">
                                            <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                                                <h2>No Resources found</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </div>
                </ng-template>
            </li>
        </ng-container>
        <li ngbNavItem class="ml-auto">
            <ul class="pagination" *ngFor="let resource of resources | paginate: { id:'resourceID',
              itemsPerPage: limit, currentPage: currentPage, totalItems: totalResources }">
            </ul>
            <pagination-controls responsive="true" maxSize="10" (pageChange)="changePage($event)" id="resourceID">
            </pagination-controls>
            <!-- <ngb-pagination class="d-flex justify-content-end" responsive="true" [collectionSize]="totalResources"
                [(page)]="currentPage" [pageSize]="limit" (pageChange)="changePage(currentPage)"></ngb-pagination> -->
        </li>
    </ul>
    <div [ngbNavOutlet]="nav" class="mt-2"></div>
</div>


<ng-template #resourceFormModal let-modal>

    <div class="modal-header">
        <div class="modal-title">
            <h1>
                <strong>{{isViewMode? 'Resource Details': isOperationUpdate ? 'Update Resource' : 'Add Resource'
                    }}</strong>
            </h1>
            <span *ngIf="!isViewMode"><span class="red">*</span>marked fields are mandatory</span>
        </div>
        <button type="button" class="close" (click)="dismissFormModal(modal)" class="btn btn-default" type="submit"><i
                class="material-icons close-icon material-icons-button">close</i>
        </button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
        <form [formGroup]="resourceForm">
            <div class="row">
                <div class="col-sm-6 col-md-4">
                    <div class="form-group">
                        <label for="sel1"><strong><span *ngIf="!isViewMode" class="red">*</span> Resource
                                Name:</strong></label>
                        <input type="text" class="form-control input-style" formControlName="resourceName"
                            placeholder="Enter Resource Name">
                        <div class="alert alert-danger" *ngIf="(resourceForm.get('resourceName').dirty || 
                            resourceForm.get('resourceName').touched) && resourceForm.get('resourceName').invalid">
                            <div *ngIf="resourceForm.get('resourceName').errors.required">
                                Resource Name must be specified
                            </div>
                            <div *ngIf="resourceForm.get('resourceName').errors.maxlength">
                                Resource Name cannot have more than 100 characters
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4">
                    <div class="form-group">
                        <label for="sel1"><strong><span *ngIf="!isViewMode" class="red">*</span> Resource
                                Type:</strong></label>
                        <select class="form-control input-style" formControlName="resourceType">
                            <option [ngValue]="null" disabled>Select Resource Type</option>
                            <option *ngFor="let type of resourceTypeList" [ngValue]="type.value">
                                {{type.value}}
                            </option>
                        </select>
                        <div class="alert alert-danger" *ngIf="(resourceForm.get('resourceType').dirty || 
                            resourceForm.get('resourceType').touched) && resourceForm.get('resourceType').invalid">
                            <div *ngIf="resourceForm.get('resourceType').errors.required">
                                Resource type must be specified
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-4 form-group">
                    <label for="sel1"><strong>Resource Sub Type:</strong></label>
                    <select class="form-control input-style" formControlName="resourceSubType">
                        <option [ngValue]="null">Select Resource Sub Type</option>
                        <option *ngFor="let type of resourceSubTypeList" [ngValue]="type.value">
                            {{type.value}}
                        </option>
                    </select>
                </div>
                <div class="col-sm-6 col-md-4 form-group">
                    <div class="d-flex">
                        <div class="col-md-10 file-type-input">
                            <fieldset [disabled]="isFileUploading">
                                <label for="sel1"><strong><span *ngIf="!isViewMode" class="red">*</span> File
                                        Type:</strong></label>
                                <select class="form-control input-style" formControlName="fileType"
                                    (change)="checkFileType()">
                                    <option [ngValue]="null" disabled>Select File Type</option>
                                    <option *ngFor="let type of fileTypeList" [ngValue]="type.value">
                                        {{type.value}}
                                    </option>
                                </select>
                                <div class="alert alert-danger" *ngIf="(resourceForm.get('fileType').dirty || 
                                    resourceForm.get('fileType').touched) && resourceForm.get('fileType').invalid">
                                    <div *ngIf="resourceForm.get('fileType').errors.required">
                                        File type must be specified
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <!-- POPOVER -->
                        <div *ngIf="resourceForm.get('fileType').value && resourceForm.get('fileType').value != VIDEO
                            && resourceForm.get('fileType').value != URL">
                            <ng-template #popContent>Allowed file types: {{allowedExtension}}</ng-template>
                            <!-- <ng-template #popTitle>Allowed Resource Type</ng-template> -->
                            <!-- [popoverTitle]="popTitle" -->
                            <button type="button" class="btn" [ngbPopover]="popContent" placement="bottom"
                                triggers="mouseenter:mouseleave">
                                <span class="material-icons cursor">help_outline</span>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Video Link and URL link -->
                <!-- <div *ngIf="resourceForm.get('fileType')?.value && (resourceForm.get('fileType').value==VIDEO
                    || resourceForm.get('fileType').value==URL); else uploadFile" class="col-sm-6 col-md-4">
                    <div class="form-group">
                        <label for="sel1"><strong><span *ngIf="!isViewMode; else goTo"><span class="red">*</span> 
                                {{resourceForm.get('fileType').value}} Link:</span>
                            <ng-template #goTo> {{resourceForm.get('fileType').value}}:</ng-template>
                        </strong></label>
                        <input *ngIf="!isViewMode" type="text" class="form-control input-style" formControlName="resourceURL"
                            placeholder="Enter link">
                        <div *ngIf="resourceForm.get('resourceURL').value && isViewMode" data-toggle="tooltip"
                            data-placement="top" title="View">
                            <button class="btn btn-primary"><a [href]="resourceForm.get('resourceURL').value"
                                target="_blank">View {{resourceForm.get('fileType').value}}</a>
                            </button>
                        </div>
                        <div class="alert alert-danger" *ngIf="(resourceForm.get('resourceURL').dirty || 
                            resourceForm.get('resourceURL').touched) && resourceForm.get('resourceURL').invalid">
                            <div *ngIf="resourceForm.get('resourceURL').errors.required">
                                Resource required
                            </div>
                            <div *ngIf="resourceForm.get('resourceURL').errors.pattern">
                                URL should be of the form https://www.example.com
                            </div>
                            <div *ngIf="resourceForm.get('resourceURL').errors.maxlength">
                                Resource URL cannot have more than 255 characters
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- <ng-template #uploadFile> -->
                <div *ngIf="resourceForm.get('fileType')?.value && (resourceForm.get('fileType').value!=VIDEO
                        || resourceForm.get('fileType').value!=URL)" class="col-sm-6 col-md-4 form-group">
                    <fieldset [disabled]="resourceForm.get('resourceURL').value"></fieldset>
                    <label for="sel1"><strong>Upload {{resourceForm.get('fileType').value}}:</strong></label>
                    <span *ngIf="!isViewMode" class="custom-file">
                        <input type="file" class="custom-file-input"
                            (change)="onResourceSelect($event, resourceForm.get('fileType').value)" id="customFile"
                            value="displayedFileName" placeholder="Select {{resourceForm.get('fileType').value}}">
                        <label class="custom-file-label" id="custom-file-label" for="customFile"
                            [innerHTML]="displayedFileName"></label>
                        <button class="btn btn-success custom-file" [disabled]="true" id="uploadingButton" type="button"
                            *ngIf="isFileUploading">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            Uploading {{resourceForm.get('fileType').value}}...
                        </button>
                        <br />
                    </span>
                    <div *ngIf="resourceForm.get('resourceURL').value && !isResourceUploadedToServer && isViewMode"
                        data-toggle="tooltip" data-placement="top">
                        <button class="btn btn-primary"><a class="link" [href]="resourceForm.get('resourceURL').value"
                                target="_blank">Open</a>
                        </button>
                    </div>
                    <label id="uploadStatus" for="customFile" [innerHTML]="docStatus"></label>
                </div>
                <!-- </ng-template> -->

                <!-- UPLOAD PREVIEW IMAGE -->
                <div *ngIf="resourceForm.get('fileType')?.value && resourceForm.get('fileType').value!=IMAGE"
                    class="col-sm-6 col-md-4 form-group">
                    <label for="sel1"><strong>Upload Preview Image:</strong></label>
                    <span *ngIf="!isViewMode" class="custom-file">
                        <input type="file" class="custom-file-input" (change)="onResourceSelect($event, PREVIEW)"
                            id="customFile" value="previewDisplayedFileName" placeholder="Select Preview Image">
                        <label class="custom-file-label" id="custom-file-label" for="customFile"
                            [innerHTML]="previewDisplayedFileName"></label>
                        <button class="btn btn-success custom-file" [disabled]="true" id="uploadingButton" type="button"
                            *ngIf="isPreviewFileUploading">
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            Uploading Preview Image...
                        </button>
                        <br />
                    </span>
                    <div *ngIf="resourceForm.get('previewURL').value && !isPreviewUploadedToServer && isViewMode"
                        data-toggle="tooltip" data-placement="top" title="Open Preview Image">
                        <button class="btn btn-primary"><a class="link" [href]="resourceForm.get('previewURL').value"
                                target="_blank">Open Preview</a>
                        </button>
                    </div>
                    <label id="uploadStatus" for="customFile" [innerHTML]="previewImageDocStatus"></label>
                </div>
                <div class="form-group col-sm-4 col-md-4">
                    <label for="sel1"><strong>Link:</strong></label>
                    <input *ngIf="!isViewMode" type="text" class="form-control input-style"
                        formControlName="resourceURL" placeholder="Enter link">
                    <div *ngIf="resourceForm.get('resourceURL').value && isViewMode" data-toggle="tooltip"
                        data-placement="top" title="View">
                        <button class="btn btn-primary"><a [href]="resourceForm.get('resourceURL').value"
                                target="_blank">View URL</a>
                        </button>
                    </div>
                    <div class="alert alert-danger" *ngIf="(resourceForm.get('resourceURL').dirty || 
                        resourceForm.get('resourceURL').touched) && resourceForm.get('resourceURL').invalid">
                        <div *ngIf="resourceForm.get('resourceURL').errors.required">
                            Resource required
                        </div>
                        <div *ngIf="resourceForm.get('resourceURL').errors.pattern">
                            Link should be of the form https://www.example.com
                        </div>
                        <div *ngIf="resourceForm.get('resourceURL').errors.maxlength">
                            Resource URL cannot have more than 255 characters
                        </div>
                    </div>
                </div>

                <div class="form-group col-sm-6 col-md-4">
                    <label for="sel1"><strong>Technology:</strong></label>
                    <ng-select [items]="technologyList" bindLabel="language" placeholder="Select Technology"
                        appendTo="body" [searchable]="true" [clearable]="true" formControlName="technology"
                        class="ng-select-style" (search)="getTechnologyList($event)" (focus)="getTechnologyList()"
                        [loading]="isTechLoading">
                        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                            {{item.language}}
                        </ng-template>
                    </ng-select>
                </div>
                <div class="form-group col-sm-3 col-md-2">
                    <label for="sel1"><span class="red">*</span> <strong>Is Book:</strong></label>
                    <select class="form-control input-style" formControlName="isBook" (change)="onIsBookChange()">
                        <option [ngValue]="null" disabled>Select</option>
                        <option [ngValue]="true">Yes</option>
                        <option [ngValue]="false">No</option>
                    </select>
                    <div class="alert alert-danger" *ngIf="(resourceForm.get('isBook').dirty || 
                        resourceForm.get('isBook').touched) && resourceForm.get('isBook').invalid">
                        <div *ngIf="resourceForm.get('isBook').errors.required">
                            Is resource book or not must be specified
                        </div>
                    </div>
                </div>
                <ng-container *ngIf="resourceForm.get('isBook')?.value">
                    <div class="form-group col-sm-6 col-sm-4">
                        <label for="sel1"><strong>Author Name:</strong></label>
                        <input type="text" class="form-control input-style" formControlName="author"
                            placeholder="Robert C. Martin">
                    </div>
                    <div class="form-group col-sm-6 col-sm-4">
                        <label for="sel1"><strong>Publication Name:</strong></label>
                        <input type="text" class="form-control input-style" formControlName="publication"
                            placeholder="O'Reilly">
                    </div>
                </ng-container>
                <div class="col-sm-12 col-md-12">
                    <div class="form-group">
                        <label for="sel1"><strong>Description:</strong></label>
                        <textarea class="form-control input-style" rows="5" formControlName="description"
                            placeholder="Enter description" nbInput appEmptyToNull></textarea>
                        <div class="alert alert-danger" *ngIf="(resourceForm.get('description').dirty || 
                            resourceForm.get('description').touched) && resourceForm.get('description').invalid">
                            <div *ngIf="resourceForm.get('description').errors.maxlength">
                                Description cannot have more than 250 characters
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="dismissFormModal(modal)">Close</button>
        <button *ngIf="!isViewMode" type="submit" class="btn btn-success" [disabled]="!resourceForm.dirty"
            (click)="onSubmit()">{{isOperationUpdate ? 'Update Resource' : 'Add Resource'}}
        </button>
    </div>

</ng-template>

<ng-template #resourceDownloadModal let-modal>
    <!-- Modal Header -->
    <div class="modal-header">
        <h2 class="modal-title">Download Details</h2>
        <button type="button" class="close" (click)="modal.dismiss('Close click')" class="btn btn-default"
            type="submit"><i class="material-icons">highlight_off</i></button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
        <div *ngIf="isResourceDownload; else noDownloads" class="responsive-table">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Sr No.</th>
                        <th>Downloaded By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let details of resourceDownload; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{details.credential.firstName}} {{details.credential.lastName}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <ng-template #noDownloads>
            <br>
            <br>
            <div class="container full-h">
                <div class="d-flex align-items-center full-h">
                    <div class="col-sm-12 col-md-12 mx-auto">
                        <div class="jumbotron">
                            <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                                <h2>Resource has not been downloaded yet.</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.dismiss('Close click')">Close</button>
    </div>
</ng-template>


<ng-template #resourceLikeModal let-modal>
    <!-- Modal Header -->
    <div class="modal-header">
        <h2 class="modal-title">Liked Details</h2>
        <button type="button" class="close" (click)="modal.dismiss('Close click')" class="btn btn-default"
            type="submit"><i class="material-icons">highlight_off</i></button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
        <div *ngIf="isResourceLike; else noLikes" class="responsive-table">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Sr No.</th>
                        <th>Liked By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let details of resourceLike; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{details.credential.firstName}} {{details.credential.lastName}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <ng-template #noLikes>
            <br>
            <br>
            <div class="container full-h">
                <div class="d-flex align-items-center full-h">
                    <div class="col-sm-12 col-md-12 mx-auto">
                        <div class="jumbotron">
                            <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                                <h2>Resource has not been liked yet.</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.dismiss('Close click')">Close</button>
    </div>
</ng-template>

<!-- Delete User Confirmation -->
<ng-template #deleteConfirmationModal let-modal>
    <!-- Modal Header -->
    <div class="modal-header">
        <h4 class="modal-title">Confirmation</h4>
        <button type="button" class="close" (click)="modal.dismiss('Close click')" class="btn btn-default"
            type="submit"><i class="material-icons">highlight_off</i></button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
        <div class="row">
            <div class="form-group col-sm-12 col-md-12">
                Are you sure you want to delete this resource?
            </div>
        </div>
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" (click)="modal.close()">Yes</button>
        <button type="button" class="btn btn-outline-primary" (click)="modal.dismiss('Close click')">No</button>
    </div>
</ng-template>

<app-master-footer></app-master-footer>