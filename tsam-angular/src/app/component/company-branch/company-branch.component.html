<ng-template #fieldNameCompulsary let-name="name">
  <label><span *ngIf="!isViewClicked" class="red">*</span> {{name}}:</label>
</ng-template>

<ng-template #fieldNameNotCompulsary let-name="name">
  <label>{{name}}:</label>
</ng-template>

<ng-template #noneTemplate>
  <span>None</span>
</ng-template>

<ng-template #dashTemplate>
  <span>-</span>
</ng-template>

<mat-drawer-container class="example-container" hasBackdrop="true">

  <!-- DRAWER CONTENT -->
  <mat-drawer #drawer mode="over" position="end" class="sidenav-style mat-drawer-style">
    <div class="search-body">
      <div class="filter-header">
        Edit Filters&nbsp;&nbsp;&nbsp;
        <span class="clear-filter-style" (click)="resetSearchCompanyForm()">Clear all filters</span>
        <div class="float-right">
          <button type="button" class="btn btn-default" (click)="drawer.toggle()">
            <i class="material-icons close-icon">close</i>
          </button>
        </div>
      </div>

      <br />
      <br />

      <form [formGroup]="searchCompanyForm">
        <div class="search-bar padding">
          <div class="filter-by-field row">
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label">Company Name:</label>
              <input type="text" class="form-control input-style" formControlName="branchName"
                placeholder="Enter Company Name">
              <div class="alert alert-danger" *ngIf="(searchCompanyForm.get('branchName').touched||searchCompanyForm.get('branchName').dirty)
                &&searchCompanyForm.get('branchName').invalid">
                <div *ngIf=" searchCompanyForm.get('branchName').errors.pattern">
                  Name should only have alphabets & dots.
                </div>
                <div *ngIf=" searchCompanyForm.get('branchName').errors.maxlength">
                  Company name should not have more than 100 characters.
                </div>
              </div>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label"> Hr Head's Name:</label>
              <input type="text" class="form-control input-style" formControlName="hrHeadName"
                placeholder="Enter Hr Head's Name">
              <div class="alert alert-danger" *ngIf="(searchCompanyForm.get('hrHeadName').touched||searchCompanyForm.get('hrHeadName').dirty)
                &&searchCompanyForm.get('hrHeadName').invalid">
                <div *ngIf=" searchCompanyForm.get('hrHeadName').errors.maxlength">
                  Name should not be more than 70 characters.
                </div>
                <div *ngIf=" searchCompanyForm.get('hrHeadName').errors.pattern">
                  Name should only have alphabets.
                </div>
              </div>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label">Number of employees:</label>
              <input type="number" appAllowNumbersOnly class="form-control input-style"
                placeholder="Enter minimum number" formControlName="numberOfEmployees">
              <div class="alert alert-danger" *ngIf="(searchCompanyForm.get('numberOfEmployees').touched||
                searchCompanyForm.get('numberOfEmployees').dirty)&&searchCompanyForm.get('numberOfEmployees').invalid">
                <div *ngIf=" searchCompanyForm.get('numberOfEmployees').errors.max">
                  Rank cannot be more than 100000.
                </div>
                <div *ngIf=" searchCompanyForm.get('numberOfEmployees').errors.pattern">
                  Rank must only contain numbers.
                </div>
              </div>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label">Rating:</label>
              <select class="form-control input-style" formControlName="companyRating">
                <option [ngValue]="null">Select Rating</option>
                <option *ngFor="let companyRating of ratingList" [ngValue]="companyRating">{{companyRating}}
                </option>
              </select>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label">SalesPerson:</label>
              <select class="form-control input-style" formControlName="salesPersonID">
                <option [ngValue]="null">Select SalesPerson</option>
                <!-- <option [ngValue]="nilUUID">Not Assigned</option> -->
                <option *ngFor="let person of salesPeople" [ngValue]="person.id">
                  {{person.firstName}} {{person.lastName}}
                </option>
              </select>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label">State:</label>
              <select class="form-control input-style" formControlName="state">
                <option [ngValue]="null">Select State</option>
                <option *ngFor="let state of allStates" [ngValue]="state">{{state.name}}
                </option>
              </select>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label class="filter-form-label">City:</label>
              <input type="text" class="form-control input-style" formControlName="city" placeholder="Enter City">
              <div class="alert alert-danger" *ngIf="(searchCompanyForm.get('city').touched||
                searchCompanyForm.get('city').dirty)&&searchCompanyForm.get('city').invalid">
                <div *ngIf=" searchCompanyForm.get('city').errors.maxlength">
                  City name should not be more than 50 characters.
                </div>
                <div *ngIf=" searchCompanyForm.get('city').errors.pattern">
                  City should only have alphabets.
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>

      <br>

      <div class="text-center">
        <button class="btn btn-submit-swabhav material-icons-button" type="submit" (click)="closeSearchDrawer()"
          [disabled]="!searchCompanyForm.dirty||searchCompanyForm.invalid">
          Search
        </button>
      </div>
    </div>
  </mat-drawer>

  <mat-drawer-content>
    <app-master-navbar></app-master-navbar>

    <div class="container-fluid margin-2pt">
      <br>

      <div class="d-flex justify-content-start align-items-center">
        <button type="button" class="btn filter-button material-icons-button d-flex align-items-center"
          (click)="backToPreviousPage()" *ngIf="isNavigatedFromCompany">
          <!-- <i class="inline-icon material-icons-outlined">chevron_left</i>Back -->
          <i class="material-icons-outlined">arrow_back</i>
        </button>
        <div class="totalLabel left-margin">
          <h1>Total Company Branches: <span class="swabhav-light-orange-text">{{totalCompanyBranches || 0}}</span></h1>
        </div>
      </div>

      <br>

      <div *ngIf="totalCompanyBranches > 0" class="view-label-flex">
        Viewing &nbsp; <span class="swabhav-light-orange-text"><strong>{{paginationString}}</strong> </span>
        &nbsp; of &nbsp;<span class="swabhav-light-orange-text"> <strong>{{totalCompanyBranches}}</strong></span>
      </div>

      <div class="d-flex justify-content-between align-items-center flex-row">
        <div class="d-flex justify-content-between align-items-center flex-row">
          <button class="btn filter-button material-icons-button" (click)="drawer.toggle()">
            Add Filter <i class="inline-icon material-icons">add</i>
          </button> &nbsp;&nbsp;&nbsp;
          <button type="button" *ngIf="searched" class="btn btn-sm btn-submit-swabhav material-icons-button"
            (click)="resetSearchAndGetAll()">View All Branches
          </button>
        </div>
        <form [formGroup]="searchCompanyForm">
          <div class="d-flex justify-content-between align-items-start flex-row flex-wrap">
            <div class="d-flex flex-wrap">
              <!-- --- changePage(1) change of limit will set the offset to 0 --- -->
              <select class="form-control form-control-sm input-style" formControlName="limit" (change)="changePage(1)">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
              </select> &nbsp;&nbsp;&nbsp;
            </div>
            <div class="d-flex flex-wrap">
              <ul class="pagination" *ngFor="let branch of companyBranchList | paginate: { id:'companyBranchPageID',
                itemsPerPage: searchCompanyForm.get('limit').value, currentPage: (+searchCompanyForm.get('offset').value + 1), 
                totalItems: totalCompanyBranches }">
              </ul>
              <pagination-controls responsive="true" maxSize="5" (pageChange)="changePage($event)"
                id="companyBranchPageID">
              </pagination-controls>
            </div>
          </div>
        </form>
      </div>

      <br>

      <div class="card-body padding-0pt swabhav-shadow" *ngIf="isCompanyBranchList; else noCompanyBranches">
        <div class="table-responsive">
          <table class="table table-striped table-borderless">
            <thead>
              <tr>
                <th>No.</th>
                <th>Company Branch ID</th>
                <th>Company Name</th>
                <th>Main Branch</th>
                <th>Domains</th>
                <th>City</th>
                <th>Rating</th>
                <th>Unit Head Name</th>
                <th>Unit Head Contact</th>
                <th>Sales Person</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let branch of companyBranchList; let i = index">
                <td class="text-center">
                  {{(i+1)+(searchCompanyForm.get('offset').value*searchCompanyForm.get('limit').value)}}</td>
                <td><span class="badge swabhav-badge">{{branch.code}}</span></td>
                <td>{{branch.branchName}}</td>
                <td class="text-center">
                  <span *ngIf="branch.mainBranch;else not_main" class="badge badge-pill badge-success">Yes</span>
                  <ng-template #not_main>
                    <span class="badge badge-pill badge-danger">No</span>
                  </ng-template>
                </td>
                <td class="text-center">
                  <div *ngIf="branch.domains && branch.domains.length > 0; else dashTemplate">
                    <span class="badge swabhav-badge" *ngFor="let domain of branch.domains">{{domain.domainName}}</span>
                  </div>
                </td>
                <td class="text-center">
                  <div *ngIf="branch.city; else dashTemplate">
                    {{branch.city}}
                  </div>
                </td>
                <td class="text-center">
                  <div *ngIf="branch.companyRating; else no_rating">
                    <span *ngIf="branch.companyRating>=3;else poor_rating"
                      class="badge badge-success">{{branch.companyRating}}
                    </span>
                    <ng-template #poor_rating>
                      <span class="badge badge-danger">{{branch.companyRating}}</span>
                    </ng-template>
                  </div>
                  <ng-template #no_rating>
                    <span class="badge badge-warning">No Rating</span>
                  </ng-template>
                </td>
                <td class="text-center">
                  <div *ngIf="branch.unitHeadName; else dashTemplate">
                    {{branch.unitHeadName}}
                  </div>
                </td>
                <td class="text-center">
                  <div *ngIf="branch.unitHeadContact; else dashTemplate">
                    {{branch.unitHeadContact}}
                  </div>
                </td>
                <td class="text-center"><span class="badge badge-pill swabhav-badge">
                    {{branch.salesPerson?.firstName +" "+branch.salesPerson?.lastName || "-" }}</span>
                </td>
                <td class="text-left">
                  <div class="dropdown">
                    <button class="btn btn-default dropdown-element material-icons-button" type="button"
                      id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="material-icons"><strong>more_vert</strong></i>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <button type="button" class="dropdown-item btn btn-dropdown btn-default"
                        (click)="onViewBranchClick(branch)">
                        <i class="inline-icon material-icons-outlined">visibility</i> View
                      </button>
                      <button class="dropdown-item btn btn-default disabled"
                        *ngIf="!branch.onePager;else onePagerPresent">
                        <i class="inline-icon material-icons">text_snippet</i> No One Pager
                      </button>
                      <ng-template #onePagerPresent>
                        <a class="dropdown-item btn-dropdown btn-default anchor-tag" href={{branch.onePager}}
                          target="_blank">
                          <i class="inline-icon material-icons inline-icon">description</i> One Pager
                        </a>
                      </ng-template>
                      <button class="dropdown-item btn btn-default disabled"
                        *ngIf="!branch.termsAndConditions;else termsPresent">
                        <i class="inline-icon material-icons">article</i> No T&C
                      </button>
                      <ng-template #termsPresent>
                        <a class="dropdown-item btn-dropdown btn-default anchor-tag" href={{branch.termsAndConditions}}
                          target="_blank">
                          <i class="inline-icon material-icons inline-icon">description</i> T&C
                        </a>
                      </ng-template>
                      <!-- <button type="button" class="dropdown-item btn btn-dropdown btn-default"
                        (click)="onAddRequirementClick(branch.id)">
                        <i class="inline-icon material-icons-outlined">notification_add</i> Add Requirement
                      </button> -->
                      <button type="button" class="dropdown-item btn btn-dropdown btn-default"
                        (click)="onDeleteBranchClick(branch)" *ngIf="permission && permission?.delete">
                        <i class="inline-icon material-icons">delete</i> Delete
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Company Branches Not Found -->
      <ng-template #noCompanyBranches>
        <div class="container full-h">
          <br />
          <br />
          <div class="d-flex align-items-center full-h">
            <div class="col-sm-12 col-md-8 mx-auto">
              <div class="jumbotron">
                <div class="form-group col-sm-12 col-md-12 col-lg-12 text-center">
                  <h2>No branches found</h2>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </div>
  </mat-drawer-content>
</mat-drawer-container>


<app-master-footer></app-master-footer>


<!-- Add/Edit Company -->
<ng-template #companyDetailModal let-modal>

  <!-- Modal Header -->
  <div class="modal-header">
    <div class="modal-title">
      <h4 class="modal-title swabhav-light-orange-text">{{modalHeader}}
        <button type="button" *ngIf="isViewClicked && permission?.update" class="btn material-icons-button"
          (click)="onUpdateBranchClick()">
          <i class="material-icons grey-icon">create</i></button>
      </h4>
      <span *ngIf="!isViewClicked"><span class="red">*
        </span> Marked fields are mandatory</span>
    </div>
    <button type="button" class="close" (click)="dismissFormModal(modal)" class="btn btn-default" type="submit"><i
        class="material-icons close-icon material-icons-button">close</i>
    </button>
  </div>

  <!-- Modal body -->
  <form [formGroup]="companyBranchForm">
    <div class="modal-body">
      <div class="row col-sm-12 col-md-12 d-flex justify-content-center">
        <h2 class="swabhav-light-orange-text"><strong>Company Branch Details</strong></h2>
      </div>
      <div class="row">
        <div class="form-group col-sm-6 col-md-6">
          <label for="sel1"><span class="red">*</span> Branch Name:</label>
          <input type="text" class="form-control input-style" formControlName="branchName"
            placeholder="Enter Branch Name">
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('branchName').touched||companyBranchForm.get('branchName').dirty)
              &&companyBranchForm.get('branchName').invalid">
            <div *ngIf="companyBranchForm.get('branchName').errors.required">
              Branch name must be specified.
            </div>
            <div *ngIf="companyBranchForm.get('branchName').errors.maxlength">
              Branch name should not have more than 100 characters.
            </div>
            <div *ngIf="companyBranchForm.get('branchName').errors.pattern">
              Branch name should have only characters.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-4 col-md-3">
          <label><span class="red">*</span> Main Branch:</label>
          <select class="form-control input-style" [compareWith]="compareFn" formControlName="mainBranch">
            <option [ngValue]="null">Select main branch</option>
            <option [ngValue]="true">Yes</option>
            <option [ngValue]="false">No</option>
          </select>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('mainBranch').touched||companyBranchForm.get('mainBranch').dirty)
            &&companyBranchForm.get('mainBranch').invalid">
            <div *ngIf=" companyBranchForm.get('mainBranch').errors.required">
              Specify whether if this is the main branch.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-5 col-md-5">
          <label for="sel1">Domains:</label>
          <ng-select formControlName="domains" [items]="allDomains" bindLabel="domainName" placeholder="Select Domains"
            appendTo="body" multiple="true" [clearable]="true" [clearOnBackspace]="true" [hideSelected]="true"
            class="ng-select-style">
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index=" index">
              {{item.domainName}}
            </ng-template>
          </ng-select>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('domains').touched||companyBranchForm.get('domains').dirty)
            &&companyBranchForm.get('domains').invalid">
            <div *ngIf=" companyBranchForm.get('domains').errors.required">
              Minimum 1 domain has to be selected.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-5 col-md-5">
          <label for="sel1"><span class="red">*</span> Technologies:</label>
          <ng-select formControlName="technologies" [items]="allTechnologies" bindLabel="language"
            placeholder="Select Technologies" appendTo="body" multiple="true" [clearable]="true" class="ng-select-style"
            [clearOnBackspace]="true" [hideSelected]="true" [loading]="isTechLoading"
            (search)="getAllTechnologies($event)" (focus)="getAllTechnologies()">
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index=" index">
              {{item.language}}
            </ng-template>
          </ng-select>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('technologies').touched||companyBranchForm.get('technologies').dirty)
            &&companyBranchForm.get('technologies').invalid">
            <div *ngIf=" companyBranchForm.get('technologies').errors.required">
              Minimum 1 technology has to be selected.
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-12 d-flex justify-content-center">
          <h2 class="swabhav-light-orange-text"><strong>Location Details</strong></h2>
        </div>
        <div class="form-group col-sm-6 col-md-4">
          <label for="sel1"><span class="red">*</span> Select Country:</label>
          <select class="form-control input-style" [compareWith]="compareFn"
            (change)="getStateList(companyBranchForm.get('country').value.id)" formControlName="country">
            <option [ngValue]="null" disabled>Select Country</option>
            <option *ngFor="let country of allCountries" [ngValue]="country">
              {{country.name}}
            </option>
          </select>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('country').touched||companyBranchForm.get('country').dirty)
              &&companyBranchForm.get('country').invalid">
            <div *ngIf=" companyBranchForm.get('country').errors.required">
              Country must be selected.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-4">
          <fieldset [disabled]="!companyBranchForm.get('country')?.value || stateList?.length == 0">
            <label><strong><span *ngIf="!isViewClicked" class="red">* </span>State:</strong></label>
            <ng-select [items]="stateList" bindLabel="name" placeholder="Select State" appendTo="body"
              [searchable]="true" [clearable]="true" formControlName="state" class="ng-select-style">
              <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                {{item.name}}
              </ng-template>
            </ng-select>
          </fieldset>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('state').touched||companyBranchForm.get('state').dirty)
            &&companyBranchForm.get('state').invalid">
            <div *ngIf=" companyBranchForm.get('country').invalid; else state_required">
              You must select a country first.
            </div>
            <ng-template #state_required>
              <div *ngIf=" companyBranchForm.get('state').errors.required">
                State must be selected.
              </div>
            </ng-template>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-4">
          <label><span class="red">*</span> City:</label>
          <input type="text" class="form-control input-style" formControlName="city" placeholder="Enter City"> <br>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('city').touched||companyBranchForm.get('city').dirty)
              &&companyBranchForm.get('city').invalid">
            <div *ngIf=" companyBranchForm.get('city').errors.required">
              City must be specified.
            </div>
            <div *ngIf=" companyBranchForm.get('city').errors.maxlength">
              City name should not be more than 30 characters.
            </div>
            <div *ngIf=" companyBranchForm.get('city').errors.pattern">
              City should only have alphabets.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-8 col-md-8">
          <label><span class=" red">*</span> Address:</label>
          <input type="text" class="form-control input-style" formControlName="address" placeholder="Enter Address">
          <br>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('address').touched||companyBranchForm.get('address').dirty)
              &&companyBranchForm.get('address').invalid">
            <div *ngIf=" companyBranchForm.get('address').errors.required">
              Address must be specified.
            </div>
            <div *ngIf=" companyBranchForm.get('address').errors.maxlength">
              Address should not be more than 100 characters.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-4">
          <label><span class="red">*</span> PIN Code:</label>
          <input type="number" appAllowNumbersOnly class="form-control input-style" formControlName="pinCode"
            placeholder="Enter PIN code"> <br>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('pinCode').touched||companyBranchForm.get('pinCode').dirty)
              &&companyBranchForm.get('pinCode').invalid">
            <div *ngIf=" companyBranchForm.get('pinCode').errors.required">
              PIN Code must be specified.
            </div>
            <div *ngIf=" companyBranchForm.get('pinCode').errors.pattern">
              Enter a valid 6 digit PIN Code.
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-12 d-flex justify-content-center">
          <h2 class="swabhav-light-orange-text"><strong>Staff Details</strong></h2>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>HR Head Name:</label>
            <input type="text" class="form-control input-style" formControlName="hrHeadName" nbInput appEmptyToNull
              placeholder="Enter HR Head's Name"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('hrHeadName').touched||companyBranchForm.get('hrHeadName').dirty)
              &&companyBranchForm.get('hrHeadName').invalid">
              <div *ngIf=" companyBranchForm.get('hrHeadName').errors.required">
                HR Head's name must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('hrHeadName').errors.maxlength">
                Name should not be more than 100 characters.
              </div>
              <div *ngIf=" companyBranchForm.get('hrHeadName').errors.pattern">
                Name should only have alphabets.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>HR Head Contact:</label>
            <input type="text" class="form-control input-style" formControlName="hrHeadContact" nbInput appEmptyToNull
              placeholder="Enter HR Head's Contact"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('hrHeadContact').touched||companyBranchForm.get('hrHeadContact').dirty)
              &&companyBranchForm.get('hrHeadContact').invalid">
              <div *ngIf=" companyBranchForm.get('hrHeadContact').errors.required">
                HR Head's contact must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('hrHeadContact').errors.pattern">
                Enter a valid 10 digit mobile number.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>HR Head Email:</label>
            <input type="email" class="form-control input-style" formControlName="hrHeadEmail" nbInput appEmptyToNull
              placeholder="Enter HR Head's email"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('hrHeadEmail').touched||companyBranchForm.get('hrHeadEmail').dirty)
              &&companyBranchForm.get('hrHeadEmail').invalid">
              <div *ngIf=" companyBranchForm.get('hrHeadEmail').errors.required">
                HR Head's Email must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('hrHeadEmail').errors.email">
                Enter a valid e-mail address.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Unit Head Name:</label>
            <input type="text" class="form-control input-style" formControlName="unitHeadName" nbInput appEmptyToNull
              placeholder="Enter Unit Head's Name"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('unitHeadName').touched||companyBranchForm.get('unitHeadName').dirty)
              &&companyBranchForm.get('unitHeadName').invalid">
              <div *ngIf=" companyBranchForm.get('unitHeadName').errors.required">
                Unit Head's name must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('unitHeadName').errors.maxlength">
                Name should not be more than 100 characters.
              </div>
              <div *ngIf=" companyBranchForm.get('unitHeadName').errors.pattern">
                Name should only have alphabets.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Unit Head Contact:</label>
            <input type="text" class="form-control input-style" formControlName="unitHeadContact" nbInput appEmptyToNull
              placeholder="Enter Unit Head's Contact"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('unitHeadContact').touched||companyBranchForm.get('unitHeadContact').dirty)
              &&companyBranchForm.get('unitHeadContact').invalid">
              <div *ngIf=" companyBranchForm.get('unitHeadContact').errors.required">
                Unit Head's contact must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('unitHeadContact').errors.pattern">
                Enter a valid 10 digit mobile number.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Unit Head Email:</label>
            <input type="email" class="form-control input-style" formControlName="unitHeadEmail" nbInput appEmptyToNull
              placeholder="Enter Unit Head's email"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('unitHeadEmail').touched||companyBranchForm.get('unitHeadEmail').dirty)
              &&companyBranchForm.get('unitHeadEmail').invalid">
              <div *ngIf=" companyBranchForm.get('unitHeadEmail').errors.required">
                Unit Head's Email must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('unitHeadEmail').errors.email">
                Enter a valid e-mail address.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Technology Head Name:</label>
            <input type="text" class="form-control input-style" formControlName="technologyHeadName" nbInput
              appEmptyToNull placeholder="Enter Technology Head's Name"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('technologyHeadName').touched||companyBranchForm.get('technologyHeadName').dirty)
              &&companyBranchForm.get('technologyHeadName').invalid">
              <div *ngIf=" companyBranchForm.get('technologyHeadName').errors.required">
                Technology Head's name must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('technologyHeadName').errors.maxlength">
                Name should not be more than 100 characters.
              </div>
              <div *ngIf=" companyBranchForm.get('technologyHeadName').errors.pattern">
                Name should only have alphabets.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Technology Head Contact:</label>
            <input type="text" class="form-control input-style" formControlName="technologyHeadContact" nbInput
              appEmptyToNull placeholder="Enter Technology Head's Contact"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('technologyHeadContact').touched||companyBranchForm.get('technologyHeadContact').dirty)
              &&companyBranchForm.get('technologyHeadContact').invalid">
              <div *ngIf=" companyBranchForm.get('technologyHeadContact').errors.required">
                Technology Head's contact must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('technologyHeadContact').errors.pattern">
                Enter a valid 10 digit mobile number.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Technology Head Email:</label>
            <input type="email" class="form-control input-style" formControlName="technologyHeadEmail" nbInput
              appEmptyToNull placeholder="Enter Technology Head's email"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('technologyHeadEmail').touched||companyBranchForm.get('technologyHeadEmail').dirty)
              &&companyBranchForm.get('technologyHeadEmail').invalid">
              <div *ngIf=" companyBranchForm.get('technologyHeadEmail').errors.required">
                Technology Head's Email must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('technologyHeadEmail').errors.email">
                Enter a valid e-mail address.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Finance Head Name:</label>
            <input type="text" class="form-control input-style" formControlName="financeHeadName" nbInput appEmptyToNull
              placeholder="Enter Finance Head's Name"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('financeHeadName').touched||companyBranchForm.get('financeHeadName').dirty)
              &&companyBranchForm.get('financeHeadName').invalid">
              <div *ngIf=" companyBranchForm.get('financeHeadName').errors.required">
                Finance Head's name must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('financeHeadName').errors.maxlength">
                Name should not be more than 100 characters.
              </div>
              <div *ngIf=" companyBranchForm.get('financeHeadName').errors.pattern">
                Name should only have alphabets.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Finance Head Contact:</label>
            <input type="text" class="form-control input-style" formControlName="financeHeadContact" nbInput
              appEmptyToNull placeholder="Enter Finance Head's Contact"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('financeHeadContact').touched||companyBranchForm.get('financeHeadContact').dirty)
              &&companyBranchForm.get('financeHeadContact').invalid">
              <div *ngIf=" companyBranchForm.get('financeHeadContact').errors.required">
                Finance Head's contact must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('financeHeadContact').errors.pattern">
                Enter a valid 10 digit mobile number.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Finance Head Email:</label>
            <input type="email" class="form-control input-style" formControlName="financeHeadEmail" nbInput
              appEmptyToNull placeholder="Enter Finance Head's email"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('financeHeadEmail').touched||companyBranchForm.get('financeHeadEmail').dirty)
              &&companyBranchForm.get('financeHeadEmail').invalid">
              <div *ngIf=" companyBranchForm.get('financeHeadEmail').errors.required">
                Finance Head's Email must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('financeHeadEmail').errors.email">
                Enter a valid e-mail address.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Recruitment Head Name:</label>
            <input type="text" class="form-control input-style" formControlName="recruitmentHeadName" nbInput
              appEmptyToNull placeholder="Enter Recruitment Head's Name"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('recruitmentHeadName').touched||companyBranchForm.get('recruitmentHeadName').dirty)
              &&companyBranchForm.get('recruitmentHeadName').invalid">
              <div *ngIf=" companyBranchForm.get('recruitmentHeadName').errors.required">
                Recruitment Head's name must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('recruitmentHeadName').errors.maxlength">
                Name should not be more than 100 characters.
              </div>
              <div *ngIf=" companyBranchForm.get('recruitmentHeadName').errors.pattern">
                Name should only have alphabets.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Recruitment Head Contact:</label>
            <input type="text" class="form-control input-style" formControlName="recruitmentHeadContact" nbInput
              appEmptyToNull placeholder="Enter Recruitment Head's Contact"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('recruitmentHeadContact').touched||companyBranchForm.get('recruitmentHeadContact').dirty)
              &&companyBranchForm.get('recruitmentHeadContact').invalid">
              <div *ngIf=" companyBranchForm.get('recruitmentHeadContact').errors.required">
                Recruitment Head's contact must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('recruitmentHeadContact').errors.pattern">
                Enter a valid 10 digit mobile number.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-4">
          <div class="form-group">
            <label>Recruitment Head Email:</label>
            <input type="email" class="form-control input-style" formControlName="recruitmentHeadEmail" nbInput
              appEmptyToNull placeholder="Enter Recruitment Head's email"> <br>
            <div class="alert alert-danger" *ngIf="(companyBranchForm.get('recruitmentHeadEmail').touched||companyBranchForm.get('recruitmentHeadEmail').dirty)
              &&companyBranchForm.get('recruitmentHeadEmail').invalid">
              <div *ngIf=" companyBranchForm.get('recruitmentHeadEmail').errors.required">
                Recruitment Head's Email must be specified.
              </div>
              <div *ngIf=" companyBranchForm.get('recruitmentHeadEmail').errors.email">
                Enter a valid e-mail address.
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6 col-md-3">
          <div class="form-group">
            <label>Rating:</label>
            <select class="form-control input-style" formControlName="companyRating">
              <option [ngValue]="null">Select Rating</option>
              <option *ngFor="let companyRating of ratingList" [ngValue]="companyRating">{{companyRating}}
              </option>
            </select>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-4">
          <label>Total Employees:</label>
          <input type="number" appAllowNumbersOnly class="form-control input-style" formControlName="numberOfEmployees"
            placeholder="Enter number of employees"> <br>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('numberOfEmployees').touched||
                companyBranchForm.get('numberOfEmployees').dirty)&&companyBranchForm.get('numberOfEmployees').invalid">
            <div *ngIf=" companyBranchForm.get('numberOfEmployees').errors.max">
              Should not be more than 1000000.
            </div>
            <div *ngIf=" companyBranchForm.get('numberOfEmployees').errors.pattern">
              Should only contain numbers.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-4">
          <label for="sel1"><span class="red">*</span> Assign Sales Person:</label>
          <select class="form-control input-style" [compareWith]="compareFn" formControlName="salesPerson">
            <option [ngValue]="null" disabled>Assign Sales Person</option>
            <option *ngFor="let person of salesPeople" [ngValue]="person">
              {{person.firstName}} {{person.lastName}}
            </option>
          </select>
          <div class="alert alert-danger" *ngIf="(companyBranchForm.get('salesPerson').touched||companyBranchForm.get('salesPerson').dirty)
              &&companyBranchForm.get('salesPerson').invalid">
            <div *ngIf="companyBranchForm.get('salesPerson').errors.required">
              Sales Person must be selected.
            </div>
          </div>
        </div>
        <!-- </ng-container> -->
      </div>

      <!-- span is used to hide the border as well -->
      <span *ngIf="!isViewClicked || selectedBranch.onePager">
        <hr>
        <div class="form-group row">
          <div class="col-sm-2 col-md-3">
            <label>One Pager: </label>
          </div>
          <div class="col-sm-4">
            <span class="custom-file">
              <input *ngIf="!isViewClicked" type="file" class="custom-file-input" (change)="onOnePagerSelect($event)"
                id="customOnePagerFile" value="onePagerDisplayedFileName">
              <label *ngIf="!isViewClicked" class="custom-file-label" id="custom-file-label" for="customFile"
                [innerHTML]="onePagerDisplayedFileName"></label>
              <button class="btn btn-success custom-file" [disabled]="true" id="uploadingButton" type="button"
                *ngIf="isOnePagerFileUploading">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Uploading file...
              </button>
              <div *ngIf="(selectedBranch && selectedBranch.onePager) && !isOnePagerUploadedToServer"
                data-toggle="tooltip" data-placement="top" title="View One Pager">
                <button *ngIf="isViewClicked" class="btn btn-submit-swabhav material-icons-button">
                  <a href={{selectedBranch.onePager}} target="_blank">View One Pager</a>
                </button>
              </div>
            </span>
            <!-- should add view uploaded onePager using a onePager variable after cleaning. -->
            <label id="uploadStatus" for="customFile" [innerHTML]="onePagerDocStatus"></label>
          </div>
        </div>
      </span>

      <!-- span is used to hide the border as well -->
      <span *ngIf="!isViewClicked || selectedBranch.termsAndConditions">
        <div class="form-group row">
          <div class="col-sm-2 col-md-3">
            <label>Terms and conditions: </label>
          </div>
          <div class="col-sm-4">
            <span class="custom-file">
              <input *ngIf="!isViewClicked" type="file" class="custom-file-input"
                (change)="onTermsAndConditionSelect($event)" id="customTermsFile" value="termsDisplayedFileName">
              <label *ngIf="!isViewClicked" class="custom-file-label" id="custom-file-label" for="customFile"
                [innerHTML]="termsDisplayedFileName"></label>
              <button class="btn btn-success custom-file" [disabled]="true" id="uploadingButton" type="button"
                *ngIf="isTermsFileUploading">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Uploading file...
              </button>
              <div *ngIf="(selectedBranch && selectedBranch.termsAndConditions) && !isTermsUploadedToServer"
                data-toggle="tooltip" data-placement="top" title="View One Pager">
                <button *ngIf="isViewClicked" class="btn btn-submit-swabhav material-icons-button">
                  <a href={{selectedBranch.termsAndConditions}} target="_blank">View Terms and Conditions</a>
                </button>
              </div>
            </span>
            <!-- should add view uploaded termsAndConditions using a termsAndConditions variable after cleaning. -->
            <label id="uploadStatus" for="customFile" [innerHTML]="termsDocStatus"></label>
          </div>
        </div>
      </span>

    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
      <button class="btn btn-default swabhav-light-orange-text material-icons-button" type="reset"
        (click)="dismissFormModal(modal)">Close</button>
      <button type="submit" *ngIf="!isViewClicked" class="btn btn-submit-swabhav material-icons-button"
        [disabled]="!companyBranchForm.dirty" (click)="validateCompanyBranchForm()">{{modalButton}}
      </button>
    </div>

  </form>

</ng-template>

<!-- Delete Company Confirmation -->
<ng-template #deleteConfirmationModal let-modal>

  <!-- Modal Header -->
  <div class="modal-header">
    <h4 class="modal-title">Confirmation</h4>
    <button type="button" class="close" (click)="modal.dismiss('Cross click')" class="btn btn-default" type="submit">
      <i class="material-icons close-icon material-icons-button">close</i>
    </button>
  </div>

  <!-- Modal body -->
  <div class="modal-body">
    <div class="row">
      <div class="form-group col-sm-12 col-md-12">
        Are you sure you want to delete this branch?
      </div>
    </div>
  </div>

  <!-- Modal footer -->
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-danger" (click)="deleteCompanyBranch()">Yes</button>
    <button type="button" class="btn btn-outline-primary" (click)="modal.dismiss('Cross click')">No</button>
  </div>
</ng-template>

<!-- Add New Company Requirement-->
<ng-template #companyRequirementModal let-modal>

  <!-- Modal Header -->
  <div class="modal-header">
    <div class="modal-title">
      <h4 class="modal-title swabhav-light-orange-text">Add Company Requirement</h4>
      <span *ngIf="!isViewClicked"><span class="red">*
        </span> Marked fields are mandatory</span>
    </div>
    <button type="button" class="close" (click)="dismissRequirementFormModal(modal)" class="btn btn-default"
      type="submit">
      <i class="material-icons material-icons-button close-icon">close</i>
    </button>
  </div>

  <!-- Modal body -->
  <form [formGroup]="companyRequirementForm">
    <div class="modal-body">
      <div class="row col-sm-12 col-md-12 d-flex justify-content-center">
        <h1 class="swabhav-light-orange-text"><strong>Requirement Details</strong></h1>
      </div>
      <div class="row">
        <div class="form-group col-sm-3 col-md-3">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Required From'}"></ng-container>
          </span>
          <input type="date" class="form-control input-style" formControlName="requiredFrom">
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('requiredFrom').touched || companyRequirementForm.get('requiredFrom').dirty) 
              && companyRequirementForm.get('requiredFrom').invalid">
            <div *ngIf="companyRequirementForm.get('requiredFrom').errors.required">
              Specify the date from which talents are required.
            </div>
            <div *ngIf="companyRequirementForm.get('requiredFrom').errors.dateInvalid">
              Requirement date must be atleast 10 days from today.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-3 col-md-3">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Required Before'}"></ng-container>
          </span>
          <input type="date" class="form-control input-style" formControlName="requiredBefore"
            [min]="companyRequirementForm.get('requiredFrom')?.value">
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('requiredBefore').touched || companyRequirementForm.get('requiredBefore').dirty) 
              && companyRequirementForm.get('requiredBefore').invalid">
            <div *ngIf="companyRequirementForm.get('requiredBefore').errors.required">
              Specify the date till which talents are required.
            </div>
            <div *ngIf="companyRequirementForm.get('requiredBefore').errors.dateInvalid">
              Requirement date must be atleast 10 days from today.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-3 col-md-2">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Total Vacancy'}"></ng-container>
          </span>
          <input type="number" appAllowNumbersOnly class="form-control input-style" formControlName="vacancy"
            placeholder="eg: 10">
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('vacancy').touched||
            companyRequirementForm.get('vacancy').dirty)&&
            companyRequirementForm.get('vacancy').invalid">
            <div *ngIf=" companyRequirementForm.get('vacancy').errors.required">
              Vacancy is required.
            </div>
            <div *ngIf=" companyRequirementForm.get('vacancy').errors.max">
              Vacancy cannot be more than 10000.
            </div>
            <div *ngIf=" companyRequirementForm.get('vacancy').errors.min">
              Vacancy cannot be less than 1.
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div class="row col-sm-12 col-md-12 d-flex justify-content-center">
        <h1 class="swabhav-light-orange-text"><strong>Academic Requirments</strong></h1>
      </div>
      <div class="row">
        <div class="form-group col-sm-4 col-md-3">
          <div>
            <label>&nbsp;</label>
          </div>
          <span>
            <ng-container *ngTemplateOutlet="fieldNameNotCompulsary; context:{name:'Qualification(s)'}"></ng-container>
          </span>
          <ng-select formControlName="qualifications" [items]="allQualifications" bindLabel="name" placeholder="Select"
            appendTo="body" multiple="true" [clearable]="true" class="ng-select-style" [clearOnBackspace]="true"
            [hideSelected]="true">
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index=" index">
              {{item.name}}
            </ng-template>
          </ng-select>
        </div>
        <div class="form-group col-sm-4 col-md-3">
          <div>
            <label>&nbsp;</label>
          </div>
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Technology(s)'}"></ng-container>
          </span>
          <ng-select formControlName="technologies" [items]="allTechnologies" bindLabel="language" placeholder="Select"
            appendTo="body" multiple="true" [clearable]="true" class="ng-select-style" [clearOnBackspace]="true"
            [hideSelected]="true" [loading]="isTechLoading" (search)="getAllTechnologies($event)"
            (focus)="getAllTechnologies()">
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index=" index">
              {{item.language}}
            </ng-template>
          </ng-select>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('technologies').touched||companyRequirementForm.get('technologies').dirty)
            &&companyRequirementForm.get('technologies').invalid">
            <div *ngIf=" companyRequirementForm.get('technologies').errors.required">
              Minimum 1 Technology has to be selected.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-3 col-md-2">
          <div>
            <label>&nbsp;</label>
          </div>
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Is Experienced?'}"></ng-container>
          </span>
          <select class="form-control input-style"
            (change)="onIsExperiencedValueChange(companyRequirementForm.get('isExperience').value)"
            formControlName="isExperience">
            <option [ngValue]="false">Fresher</option>
            <option [ngValue]="true">Experienced</option>
          </select>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('isExperience').touched||companyRequirementForm.get('isExperience').dirty)
            &&companyRequirementForm.get('isExperience').invalid">
            <div *ngIf=" companyRequirementForm.get('isExperience').errors.required">
              Experience has to be selected.
            </div>
          </div>
        </div>
        <ng-container *ngIf="showExperienceFields">
          <div class="form-group col-sm-3 col-md-2">
            <div>
              <label class="experience-label-style">Experience (in years):</label>
            </div>
            <span>
              <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Minimum'}"></ng-container>
            </span>
            <input type="number" appAllowNumbersOnly class="form-control input-style"
              formControlName="minimumExperience" placeholder="eg: 2"
              (input)="setMaximumExperienceMinimumValue($event.target.value)">
            <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('minimumExperience').touched
              ||companyRequirementForm.get('minimumExperience').dirty)
              &&companyRequirementForm.get('minimumExperience').invalid">
              <div *ngIf="companyRequirementForm.get('minimumExperience').errors.required">
                Mininum Experience has to be specified.
              </div>
              <div *ngIf="companyRequirementForm.get('minimumExperience').errors.min">
                Mininum Experience cannot be below 1.
              </div>
              <div *ngIf="companyRequirementForm.get('minimumExperience').errors.max">
                Mininum Experience cannot be above 30.
              </div>
            </div>
          </div>
          <div class="form-group col-sm-3 col-md-2">
            <div>
              <label>&nbsp;</label>
            </div>
            <span>
              <ng-container *ngTemplateOutlet="fieldNameNotCompulsary; context:{name:'Maximum'}"></ng-container>
            </span>
            <input type="number" appAllowNumbersOnly class="form-control input-style"
              formControlName="maximumExperience" placeholder="eg: 2">
            <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('maximumExperience').touched
              ||companyRequirementForm.get('maximumExperience').dirty)
              &&companyRequirementForm.get('maximumExperience').invalid">
              <div *ngIf="companyRequirementForm.get('maximumExperience').errors.min">
                Maxinum Experience cannot be below {{minValueForMaxExp}}.
              </div>
              <div *ngIf="companyRequirementForm.get('maximumExperience').errors.max">
                Maxinum Experience cannot be above 30.
              </div>
            </div>
          </div>
        </ng-container>
      </div>
      <hr>
      <div class="row col-sm-12 col-md-12 d-flex justify-content-center">
        <h1 class="swabhav-light-orange-text"><strong>Job Details</strong></h1>
      </div>
      <div class="row">
        <div class="form-group col-sm-4 col-md-3">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Job Type'}"></ng-container>
          </span>
          <select class="form-control input-style" formControlName="jobType">
            <option value="null" disabled>Select job type</option>
            <option value="Full Time">Full Time</option>
            <option value="Part Time">Part Time</option>
          </select>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('jobType').touched||companyRequirementForm.get('jobType').dirty)
            &&companyRequirementForm.get('jobType').invalid">
            <div *ngIf=" companyRequirementForm.get('jobType').errors.required">
              Job type must be selected.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-4 col-md-3">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Job Designation'}"></ng-container>
          </span>
          <ng-select [items]="designationList" bindLabel="position" [clearable]="true" formControlName="designationID"
            placeholder="Select" appendTo="body" [searchable]="true" bindValue="id" class="ng-select-style">
            <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
              {{item.position}}
            </ng-template>
          </ng-select>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('designationID').touched||companyRequirementForm.get('designationID').dirty)
            &&companyRequirementForm.get('designationID').invalid">
            <div *ngIf=" companyRequirementForm.get('designationID').errors.required">
              Designation must be selected.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-4 col-md-3">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Minimum Package'}"></ng-container>
          </span>
          <input type="number" appAllowNumbersOnly class="form-control input-style" formControlName="minimumPackage"
            placeholder="eg: 100000">
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('minimumPackage').touched||companyRequirementForm.get('minimumPackage').dirty)
            &&companyRequirementForm.get('minimumPackage').invalid">
            <div *ngIf=" companyRequirementForm.get('minimumPackage').errors.required">
              Package must be specified.
            </div>
            <div *ngIf="companyRequirementForm.get('minimumPackage').errors.min">
              Package must be more than 100000.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-4 col-md-3">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Maximum Package'}"></ng-container>
          </span>
          <input type="number" appAllowNumbersOnly class="form-control input-style" formControlName="maximumPackage"
            placeholder="eg: 100000">
          <div class="alert alert-danger"
            *ngIf="(companyRequirementForm.get('maximumPackage').touched
            ||companyRequirementForm.get('maximumPackage').dirty)&&companyRequirementForm.get('maximumPackage').invalid">
            <div *ngIf=" companyRequirementForm.get('maximumPackage').errors.required">
              Package must be specified.
            </div>
            <div *ngIf=" companyRequirementForm.get('maximumPackage').errors.min">
              Package must be more than {{companyRequirementForm.get('minimumPackage')?.value}}.
            </div>
            <div *ngIf=" companyRequirementForm.get('maximumPackage').errors.max">
              Package must be less than 100000000000.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-12">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Job Description'}"></ng-container>
          </span>
          <!-- <quill-editor [styles]="quillEditorStyle" [modules]="quillModuleConfig" 
            formControlName="jobDescription" placeholder="Enter your answer here">
          </quill-editor> -->
          <ckeditor [config]="ckConfig" formControlName="jobDescription" placeholder="Enter your answer here">
          </ckeditor>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('jobDescription').touched||companyRequirementForm.get('jobDescription').dirty)
            &&companyRequirementForm.get('jobDescription').invalid">
            <div *ngIf=" companyRequirementForm.get('jobDescription').errors.required">
              Description must be specified.
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-12">
          <span>
            <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Requirement'}"></ng-container>
          </span>
          <!-- <quill-editor [styles]="quillEditorStyle" [modules]="quillModuleConfig" 
            formControlName="jobRequirement" placeholder="Enter your answer here">
          </quill-editor> -->
          <ckeditor [config]="ckConfig" formControlName="jobRequirement" placeholder="Enter your answer here">
          </ckeditor>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('jobRequirement').touched||companyRequirementForm.get('jobRequirement').dirty)
            &&companyRequirementForm.get('jobRequirement').invalid">
            <div *ngIf=" companyRequirementForm.get('jobRequirement').errors.required">
              Requirement must be specified.
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div class="row col-sm-12 col-md-12 d-flex justify-content-center">
        <h1 class="swabhav-light-orange-text"><strong>Job Location Details</strong></h1>
      </div>
      <form [formGroup]="jobLocation">
        <div class="row">
          <div class="form-group col-sm-4 col-md-3">
            <span>
              <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Country'}"></ng-container>
            </span>
            <select class="form-control input-style" [compareWith]="compareFn" formControlName="country"
              (change)="getStateList(jobLocation.get('country').value.id)">
              <option [ngValue]="null" disabled>Select</option>
              <option *ngFor="let c of allCountries" [ngValue]="c">{{c.name}}</option>
            </select>
            <div class="alert alert-danger" *ngIf="(jobLocation.get('country').touched||jobLocation.get('country').dirty)
              &&jobLocation.get('country').invalid">
              <div *ngIf=" jobLocation.get('country').errors.required">
                Country must be selected.
              </div>
            </div>
          </div>
          <div class="form-group col-sm-4 col-md-3">
            <div class="form group">
              <fieldset [disabled]="!jobLocation.get('country')?.value || stateList?.length == 0">
                <span>
                  <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'State'}"></ng-container>
                </span>
                <select class="form-control input-style" [compareWith]="compareFn" formControlName="state">
                  <option [ngValue]="null" disabled>Select</option>
                  <option *ngFor="let state of stateList" [ngValue]="state">{{state.name}}</option>
                </select>
              </fieldset>
              <div class="alert alert-danger" *ngIf="(jobLocation.get('state').touched||jobLocation.get('state').dirty)
                &&jobLocation.get('state').invalid">
                <div *ngIf=" jobLocation.get('country').invalid; else state_required">
                  You must select a country first.
                </div>
                <ng-template #state_required>
                  <div *ngIf=" jobLocation.get('state').errors.required">
                    State must be selected.
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
          <div class="form-group col-sm-4 col-md-3">
            <span>
              <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'City'}"></ng-container>
            </span>
            <input type="text" class="form-control input-style" formControlName="city" placeholder="eg: Mumbai">
            <div class="alert alert-danger" *ngIf="(jobLocation.get('city').touched||jobLocation.get('city').dirty)
              &&jobLocation.get('city').invalid">
              <div *ngIf=" jobLocation.get('city').errors.required">
                City must be specified.
              </div>
              <div *ngIf=" jobLocation.get('city').errors.maxlength">
                City name should not be more than 50 characters.
              </div>
              <div *ngIf=" jobLocation.get('city').errors.pattern">
                City should only have alphabets.
              </div>
            </div>
          </div>
          <div class="form-group col-sm-4 col-md-3">
            <span>
              <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'PIN Code'}"></ng-container>
            </span>
            <input type="number" appAllowNumbersOnly class="form-control input-style" formControlName="pinCode"
              placeholder="eg: 417898">
            <div class="alert alert-danger" *ngIf="(jobLocation.get('pinCode').touched||jobLocation.get('pinCode').dirty)
              &&jobLocation.get('pinCode').invalid">
              <div *ngIf=" jobLocation.get('pinCode').errors.required">
                PIN Code must be specified.
              </div>
              <div *ngIf=" jobLocation.get('pinCode').errors.pattern">
                Enter a valid 6 digit PIN Code.
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-sm-12 col-md-12">
            <span>
              <ng-container *ngTemplateOutlet="fieldNameCompulsary; context:{name:'Address'}"></ng-container>
            </span>
            <textarea class="form-control input-style" formControlName="address" rows="2"
              placeholder="eg: Mumbai, Maharahstra" appEmptyToNull></textarea>
            <div class="alert alert-danger" *ngIf="(jobLocation.get('address').touched||jobLocation.get('address').dirty)
              &&jobLocation.get('address').invalid">
              <div *ngIf=" jobLocation.get('address').errors.required">
                Address must be specified.
              </div>
              <div *ngIf=" jobLocation.get('address').errors.maxlength">
                Address should not be more than 100 characters.
              </div>
            </div>
          </div>
        </div>
      </form>
      <hr>
      <div class="row col-sm-12 col-md-12 d-flex justify-content-center">
        <h1 class="swabhav-light-orange-text"><strong>Other Requirement Details</strong></h1>
      </div>
      <div class="row">
        <div class="col-sm-4 col-md-3">
          <div class="form-group">
            <span>
              <ng-container *ngTemplateOutlet="fieldNameNotCompulsary; context:{name:'Talent Personality Type'}">
              </ng-container>
            </span>
            <select class="form-control input-style" [compareWith]="compareFn" formControlName="personalityType">
              <option [ngValue]="null">Select</option>
              <option *ngFor="let personalityType of allPersonalityTypes" [ngValue]="personalityType.value">
                {{personalityType.value}}
              </option>
            </select>
          </div>
        </div>
        <div class="col-sm-4 col-md-3">
          <div class="form-group">
            <span>
              <ng-container *ngTemplateOutlet="fieldNameNotCompulsary; context:{name:'Talent Rating'}"></ng-container>
            </span>
            <select class="form-control input-style" formControlName="talentRating">
              <option [ngValue]="null">Select</option>
              <option *ngFor="let talentRating of talentRatingList" [ngValue]="talentRating.key">
                {{talentRating.value}}
              </option>
            </select>
          </div>
        </div>
      </div>
      <span>
        <ng-container *ngTemplateOutlet="fieldNameNotCompulsary; context:{name:'Comment'}"></ng-container>
      </span>
      <div class="row">
        <div class="form-group col-sm-12 col-md-12">
          <textarea class="form-control input-style" rows="5" formControlName="comment" nbInput appEmptyToNull
            placeholder="Write more specific details of the requirement here...."></textarea>
          <div class="alert alert-danger" *ngIf="(companyRequirementForm.get('comment').touched||companyRequirementForm.get('comment').dirty)
              &&companyRequirementForm.get('comment').invalid">
            <div *ngIf="companyRequirementForm.get('comment').errors.maxlength">
              Comment should not be more than 4000 characters.
            </div>
          </div>
        </div>
      </div>

      <!-- span is used to hide the border as well -->
      <span>
        <hr>
        <div class="form-group row">
          <label class="col-sm-3 col-form-label">Terms and conditions: </label>
          <div class="col-sm-4">
            <span class="custom-file">
              <input type="file" class="custom-file-input" (change)="onRequirementTermsAndConditionSelect($event)"
                id="customTermsFile" value="requirementTermsDisplayedFileName">
              <label class="custom-file-label" id="custom-file-label" for="customTermsFile"
                [innerHTML]="requirementTermsDisplayedFileName"></label>
              <button class="btn btn-success custom-file" [disabled]="true" id="uploadingButton" type="button"
                *ngIf="isRequirementTermsFileUploading">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Uploading file...
              </button>
            </span>
            <!-- should add view uploaded termsAndConditions using a termsAndConditions variable after cleaning. -->
            <label id="uploadStatus" for="customTermsFile" [innerHTML]="requirementTermsDocStatus"></label>
          </div>
        </div>
      </span>
      <span>
        <div class="form-group row">
          <label class="col-sm-3 col-form-label">Sample Offer Letter: </label>
          <div class="col-sm-4">
            <span class="custom-file">
              <input type="file" class="custom-file-input" (change)="onOfferLetterClick($event)"
                id="customOfferLetterFile" value="offerDisplayedFileName">
              <label class="custom-file-label" id="custom-file-label" for="customOfferLetterFile"
                [innerHTML]="offerDisplayedFileName"></label>
              <button class="btn btn-success custom-file" [disabled]="true" id="uploadingButton" type="button"
                *ngIf="isOfferLetterFileUploading">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Uploading file...
              </button>
            </span>
            <!-- should add view uploaded brochure using a brochure variable after cleaning. -->
            <label id="uploadStatus" for="customOfferLetterFile" [innerHTML]="offerLetterDocStatus"></label>
          </div>
        </div>
      </span>
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
      <button class="btn btn-default swabhav-light-orange-text material-icons-button" type="reset"
        (click)="dismissRequirementFormModal(modal)">Close</button>
      <button type="submit" class="btn btn-submit-swabhav material-icons-button"
        [disabled]="!companyRequirementForm.dirty" (click)="validateCompanyRequirementForm()">Add Requirement</button>
    </div>
  </form>

</ng-template>